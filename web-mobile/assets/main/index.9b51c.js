window.__require=function e(t,n,i){function o(c,a){if(!n[c]){if(!t[c]){var l=c.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!a&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){return o(t[c][1][e]||e)},f,f.exports,e,t,n,i)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({Model:[function(e,t){"use strict";function n(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}return""}cc._RF.push(t,"066b6OssvtByIddq1GP54g4","Model"),t.exports={signner_name:[],signner_picture:[],signner_id:[],Signner_js:null,Signer_items:[],WhitchBlock:null,liffstate:"",Local_ID:"",WebSocket_NumberOfSign_Host:function(){var t=new WebSocket("wss://"+i.local_ID+"/ws/v1/host/signwall?activity_id="+i.activity_id);t.onopen=function(){console.log(" WebSocket_NumberOfSign_Host \u901a\u9053\u958b\u555f")},t.onmessage=function(t){console.log("response text msg: "+t.data);var n=e("Model"),i=JSON.parse(t.data);console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6: ",i.message);for(var o=0;o<i.SignStaffs.length;o++)0==n.signner_id.includes(i.SignStaffs[o].id)&&(n.signner_id[o]=i.SignStaffs[o].id,n.signner_name[o]=i.SignStaffs[o].name,n.signner_picture[o]=i.SignStaffs[o].avatar,n.Signner_js.SpawnWinner(),console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6\u59d3\u540d[] : "+n.signner_name[o]),console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6\u982d\u50cf[] : "+n.signner_picture[o]))},t.onerror=function(){console.log(" WebSocket_NumberOfSign \u9023\u7dda\u932f\u8aa4")},t.onclose=function(){console.log(" WebSocket_NumberOfSign \u901a\u9053\u95dc\u9589"),i.WebSocket_NumberOfSign_Host()}}};var i=e("Model");i.activity_id=n("activity_id"),i.game_id=n("game_id"),i.liffstate=n("liff.state"),i.identify_id=n("identify"),function(){if(""!=i.activity_id&&""!=i.game_id||(i.liffstate.length>13&&(i.liffstate=i.liffstate.substr(17,i.liffstate.length)),console.log("LiffState"+i.liffstate)),i.liffstate.includes("%26game_id%3D")){var e=i.liffstate.split("%26game_id%3D");i.activity_id=e[0],console.log("LiffState.activity_id ="+i.activity_id),2==e.length&&(e=e[1].split("#mst_challenge"),i.game_id=e[0],console.log("LiffState.game_id ="+i.game_id))}}(),cc._RF.pop()},{Model:"Model"}],ShowSignner:[function(e,t){"use strict";cc._RF.push(t,"b7450lebqJEnoZcVILO9KpZ","ShowSignner");var n=e("Signner"),i=e("Model");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},bar:{default:null,type:cc.Node},items_parent:{default:null,type:cc.Node}},onLoad:function(){i.local_ID="hilives.net"==window.location.host?"api.hilives.net":"apidev.hilives.net",console.log("window:"+window.location.host),console.log("local_ID: "+i.local_ID),i.Signner_js=this,i.WebSocket_NumberOfSign_Host(),this.itemlist=[],this.indexcount=0},start:function(){},SpawnWinner:function(){this.indexcount++;var e=cc.instantiate(this.items);e.parent=this.items_parent;var t=e.getComponent(n);this.itemlist.push(t),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)},AddNew:function(){var e=Math.floor(20*Math.random())+1;console.log(e),0==i.signner_id.includes(e)&&i.signner_id.push(e),this.SpawnWinner()},update:function(){}}),cc._RF.pop()},{Model:"Model",Signner:"Signner"}],Signner:[function(e,t){"use strict";cc._RF.push(t,"f26adAmHgBE17GvhrR2SV8Y","Signner");var n=e("Model");cc.Class({extends:cc.Component,properties:{MoveObject:{default:null,type:cc.Node},playerName:{default:null,type:cc.Label},playerAvatar:{default:null,type:cc.Sprite}},updateInfo:function(e){this.playerName.string=n.signner_name[e],this.playerAvatar.spriteFrames=n.signner_picture[e],cc.assetManager.loadRemote(n.signner_picture[e],{ext:".jpg"},function(t,i){if(t)console.log("\u932f\u8aa4");else{var o=new cc.SpriteFrame(i);n.Signner_js.itemlist[e].playerAvatar.spriteFrame=o}})},onLoad:function(){this.items_parent=cc.find("\u756b\u5e03/\u5df2\u7c3d\u5230\u6b04/view/content"),this.WhitchBlock=this.items_parent.getChildrenCount()%3,console.log("\u7b2c\u5e7e\u683c"+this.WhitchBlock)},start:function(){1==this.WhitchBlock?(this.MoveObject.setPosition(-610,1150),this.node.getComponent(sp.Skeleton).setAnimation(0,"down",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,1150)}).to(.3,{scale:1.2}).to(.3,{scale:1}).to(.82,{position:cc.v2(0,0)}).start()):2==this.WhitchBlock?(this.MoveObject.setPosition(-610,571),this.node.getComponent(sp.Skeleton).setAnimation(0,"middle",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,571)}).to(.3,{scale:1.2}).to(.3,{scale:1}).to(.53,{position:cc.v2(0,0)}).start()):0==this.WhitchBlock&&(this.MoveObject.setPosition(-610,0),this.node.getComponent(sp.Skeleton).setAnimation(0,"up",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,0)}).to(.3,{scale:1.2}).to(.3,{scale:1}).start())},update:function(){}}),cc._RF.pop()},{Model:"Model"}]},{},["Model","ShowSignner","Signner"]);